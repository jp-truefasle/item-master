window.__require=function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var c=i.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+i+"'")}i=c}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return r(e[i][1][t]||t)},l,l.exports,t,e,o,n)}return o[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({AttackStateW:[function(t,e,o){"use strict";cc._RF.push(e,"2be8aRgPqtFe7hrsA6zV/dB","AttackStateW");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.attack,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"attack",1)},e.prototype.Reason=function(t){s.default.Instance(s.default).attackEnemyEndWuKong&&(s.default.Instance(s.default).attackEnemyEndWuKong=!1,null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.fsm.performTransition(a.Transition.stopAction),this.storePos=null):this.fsm.performTransition(a.Transition.attackEnd))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],AttackState:[function(t,e,o){"use strict";cc._RF.push(e,"40a86RSzWhKAKk6mJ9QFxFk","AttackState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.attack,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"attack",1)},e.prototype.Reason=function(t){s.default.Instance(s.default).attackEnemyEndTangseng&&(s.default.Instance(s.default).attackEnemyEndTangseng=!1,null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.fsm.performTransition(a.Transition.stopAction),this.storePos=null):this.fsm.performTransition(a.Transition.attackEnd))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ce93efj4uxHHKtTfw0m6QKU","AudioMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EventFrameWork/Singleton"),i=t("./StorageMgr"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgMusic=null,e.isPlayEffect=!0,e.isCloseMusic=!1,e}return r(e,t),e.prototype.init=function(t){this.bgMusic=t,i.default.Instance(i.default).getIsCloseMusic()?this.pauseAllMusic():this.resumeAllMusic()},e.prototype.playBGM=function(){cc.audioEngine.playMusic(this.bgMusic,!0)},e.prototype.pauseBGM=function(){cc.audioEngine.pauseMusic()},e.prototype.resumeBGM=function(){cc.audioEngine.resumeMusic()},e.prototype.stopBGM=function(){cc.audioEngine.stopMusic()},e.prototype.playEffect=function(t){this.isPlayEffect&&cc.audioEngine.playEffect(t,!1)},e.prototype.pauseEffect=function(){this.isPlayEffect=!1},e.prototype.resumeEffect=function(){this.isPlayEffect=!0},e.prototype.pauseAllMusic=function(){this.pauseBGM(),this.pauseEffect(),this.setIsCloseMusic(!0)},e.prototype.resumeAllMusic=function(){this.resumeBGM(),this.resumeEffect(),this.setIsCloseMusic(!1)},e.prototype.getIsCloseMusic=function(){return this.isCloseMusic},e.prototype.setIsCloseMusic=function(t){this.isCloseMusic=t},e}(a.default);o.default=s,cc._RF.pop()},{"../EventFrameWork/Singleton":"Singleton","./StorageMgr":"StorageMgr"}],BasePanel:[function(t,e,o){"use strict";cc._RF.push(e,"7036cwdq0xFaLbn9J9puZEr","BasePanel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),a([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],CameraMgr:[function(t,e,o){"use strict";cc._RF.push(e,"598af2cX+pMPplDvjg7sJmr","CameraMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.followTarget=null,e}return r(e,t),e.prototype.start=function(){this.cameraFollow(this.followTarget)},e.prototype.cameraFollow=function(t,e,o,n,r){var a=t.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node.parent.convertToNodeSpaceAR(a);if(console.log(i),this.node.position=new cc.Vec3(i.x,i.y,0),console.log("1:",e,o,n,r),console.log(null==e),null!=e&&null!=o&&null!=n&&null!=r){var s=this.node.position;s.x>=o?s.x=o:s.x<=e&&(s.x=e),s.y>=r?s.y=r:s.y<=n&&(s.y=n),this.node.setPosition(s)}},a([c(cc.Node)],e.prototype,"followTarget",void 0),a([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],DragonBonesMgr:[function(t,e,o){"use strict";cc._RF.push(e,"3c420fZnKxAtKEcXW4w85V6","DragonBonesMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.playAnimation=function(t,e,o){t.getComponent(dragonBones.ArmatureDisplay).animationName!=e&&t.getComponent(dragonBones.ArmatureDisplay).playAnimation(e,o)},e}(t("../FrameWork/EventFrameWork/Singleton").default);o.default=a,cc._RF.pop()},{"../FrameWork/EventFrameWork/Singleton":"Singleton"}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"0214bNZDeFOG4iqnbChCMPw","Enemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=100,e.progress=null,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.progress=this.node.getChildByName("progress").getComponent(cc.ProgressBar)},e.prototype.start=function(){},e.prototype.onBeginContact=function(){this.life=this.life-10,this.setProgress(this.life)},e.prototype.setProgress=function(t){this.progress.progress=t/100},a([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],EventCenter:[function(t,e,o){"use strict";cc._RF.push(e,"5dba7Y05eBAGY54LpXf1Ew4","EventCenter");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_eventType=new Map,e}return r(e,t),e.prototype.addListener=function(t,e,o){this.m_eventType.has(t)||this.m_eventType.set(t,null),null==this.m_eventType.get(t)?(console.log("1"),this.m_eventType.set(t,e),o.on(t,e,o),console.log(this.m_eventType)):console.error("\u4e8b\u4ef6\u5df2\u5b58\u5728\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0")},e.prototype.removeListener=function(t,e,o){if(this.m_eventType.has(t)){var n=this.m_eventType.get(t);if(null==n)return void console.error("\u4e8b\u4ef6\u4e3a\u7a7a\uff0c\u79fb\u9664\u5931\u8d25");if(n!=e)return void console.error("\u4e0d\u5b58\u5728\u8be5\u4e8b\u4ef6\uff0c\u8bf7\u68c0\u67e5\u4e8b\u4ef6\u7801\u662f\u5426\u6b63\u786e");this.m_eventType.delete(t)}o.off(t,e,o)},e.prototype.boradcast=function(t,e,o,n,r,a,i){this.m_eventType.has(e)?null!=this.m_eventType.get(e)?t.emit(e,o,n,r,a,i):console.error("\u4e8b\u4ef6\u4e3a\u7a7a"):console.error("\u4e8b\u4ef6\u4e0d\u5b58\u5728")},e}(t("./Singleton").default);o.default=a,cc._RF.pop()},{"./Singleton":"Singleton"}],EventMgr:[function(t,e,o){"use strict";cc._RF.push(e,"828bcidIYRHpYx3EI+CbTqW","EventMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../FrameWork/EventFrameWork/EventCenter"),s=t("../FrameWork/EventFrameWork/EventType"),c=t("./Global"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){i.default.Instance(i.default).addListener(s.EventType.select,this.select,c.default.Instance(c.default).eventNode)},e.prototype.onDestroy=function(){i.default.Instance(i.default).removeListener(s.EventType.select,this.select,c.default.Instance(c.default).eventNode)},e.prototype.select=function(t){var e=t.getChildByName("jiantou");0==e.active&&(e.active=!0)},a([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../FrameWork/EventFrameWork/EventCenter":"EventCenter","../FrameWork/EventFrameWork/EventType":"EventType","./Global":"Global"}],EventType:[function(t,e,o){"use strict";cc._RF.push(e,"7a89bhBXr9Bu5Ll3lx7caz0","EventType"),Object.defineProperty(o,"__esModule",{value:!0}),o.EventType=void 0,(o.EventType||(o.EventType={})).select="select",cc._RF.pop()},{}],FSMState:[function(t,e,o){"use strict";var n,r;cc._RF.push(e,"05dc3OaL8hCvZwIr1tWgrVN","FSMState"),Object.defineProperty(o,"__esModule",{value:!0}),o.StateID=o.Transition=void 0,function(t){t[t.NullTransition=0]="NullTransition",t[t.stopAction=1]="stopAction",t[t.selectPlayer=2]="selectPlayer",t[t.playerMove=3]="playerMove",t[t.attackEnemy=4]="attackEnemy",t[t.attackEnd=5]="attackEnd",t[t.hitEnemy=6]="hitEnemy",t[t.hitEnd=7]="hitEnd",t[t.hitYun=8]="hitYun"}(n=o.Transition||(o.Transition={})),function(t){t[t.NullStateID=0]="NullStateID",t[t.idle=1]="idle",t[t.select=2]="select",t[t.move=3]="move",t[t.attack=4]="attack",t[t.hit=5]="hit",t[t.yun=6]="yun"}(r=o.StateID||(o.StateID={}));var a=function(){function t(t){this.stateID=r.NullStateID,this.map=new Map,this.fsm=null,this.fsm=t}return Object.defineProperty(t.prototype,"ID",{get:function(){return this.stateID},enumerable:!1,configurable:!0}),t.prototype.addTransition=function(t,e){t!=n.NullTransition&&e!=r.NullStateID&&(this.map.has(t)||this.map.set(t,e))},t.prototype.deleteTransition=function(t){t!=n.NullTransition&&0!=this.map.has(t)&&this.map.delete(t)},t.prototype.getOutPutState=function(t){return this.map.has(t)?(console.log(this.map.get(t)),this.map.get(t)):r.NullStateID},t.prototype.DoBeforeEntering=function(){},t.prototype.DoAfterLeaving=function(){},t}();o.default=a,cc._RF.pop()},{}],FSMSystem:[function(t,e,o){"use strict";cc._RF.push(e,"c9e56QecM1AZbq3D7sA/K6r","FSMSystem"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./FSMState"),r=function(){function t(){this.states=new Map,this.currentStateID=null,this.currentState=null}return t.prototype.addState=function(t){null!=t?(null==this.currentState&&(this.currentState=t,this.currentStateID=t.ID),console.log(this.states,t.ID),this.states.has(t.ID)?console.log("2"):this.states.set(t.ID,t)):console.log("1")},t.prototype.deleteState=function(t){t!=n.StateID.NullStateID&&0!=this.states.has(t)&&this.states.delete(t)},t.prototype.performTransition=function(t){if(t!=n.Transition.NullTransition){var e=this.currentState.getOutPutState(t);if(e!=n.StateID.NullStateID&&0!=this.states.has(e)){var o=this.states.get(e);this.currentState.DoAfterLeaving(),this.currentState=o,this.currentStateID=e,this.currentState.DoBeforeEntering()}}},t.prototype.onState=function(t){this.currentState.Act(t),this.currentState.Reason(t)},t}();o.default=r,cc._RF.pop()},{"./FSMState":"FSMState"}],GameMgr:[function(t,e,o){"use strict";cc._RF.push(e,"30b70jzFPJCYKRWUlSsDbKd","GameMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Global"),s=cc._decorator,c=s.ccclass,u=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){i.default.Instance(i.default).init()},a([c],e)}(cc.Component));o.default=u,cc._RF.pop()},{"./Global":"Global"}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"688addL0zNJ0ZCr2NwHdxPZ","Global");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventNode=null,e.touchTangseng=!1,e.touchTangsengEnd=!1,e.attackEnemyTangseng=!1,e.attackEnemyEndTangseng=!1,e.hitEnemyTangseng=!1,e.hitEndEnemyTangseng=!1,e.touchWuKong=!1,e.touchWuKongEnd=!1,e.attackEnemyWuKong=!1,e.attackEnemyEndWuKong=!1,e.hitEnemyWuKong=!1,e.hitEndEnemyWuKong=!1,e}return r(e,t),e.prototype.init=function(){this.eventNode=cc.find("Canvas/eventNode")},e}(t("../FrameWork/EventFrameWork/Singleton").default);o.default=a,cc._RF.pop()},{"../FrameWork/EventFrameWork/Singleton":"Singleton"}],HitStateW:[function(t,e,o){"use strict";cc._RF.push(e,"e2a35K+wLRAoK5qMOxPZ6hc","HitStateW");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.hit,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"hit",1)},e.prototype.Reason=function(t){s.default.Instance(s.default).hitEndEnemyWuKong&&(s.default.Instance(s.default).hitEndEnemyWuKong=!1,null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.fsm.performTransition(a.Transition.stopAction),this.storePos=null):this.fsm.performTransition(a.Transition.hitEnd))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],HitState:[function(t,e,o){"use strict";cc._RF.push(e,"81841QnlR1EpJgOieK2HtRz","HitState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.hit,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"hit",1)},e.prototype.Reason=function(t){s.default.Instance(s.default).hitEndEnemyTangseng&&(s.default.Instance(s.default).hitEndEnemyTangseng=!1,null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.fsm.performTransition(a.Transition.stopAction),this.storePos=null):this.fsm.performTransition(a.Transition.hitEnd))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],IdleStateW:[function(t,e,o){"use strict";cc._RF.push(e,"3991cgtgLFED5d56IqQklaS","IdleStateW");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.stateID=a.StateID.idle,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"idle",0)},e.prototype.Reason=function(){s.default.Instance(s.default).touchWuKong&&(s.default.Instance(s.default).touchWuKong=!1,this.fsm.performTransition(a.Transition.selectPlayer))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],IdleState:[function(t,e,o){"use strict";cc._RF.push(e,"93426Pp2WZK0pD9mN8B3G87","IdleState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.stateID=a.StateID.idle,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"idle",0)},e.prototype.Reason=function(){s.default.Instance(s.default).touchTangseng&&(s.default.Instance(s.default).touchTangseng=!1,console.log("????"),this.fsm.performTransition(a.Transition.selectPlayer))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],IsPausePanel:[function(t,e,o){"use strict";cc._RF.push(e,"1cba5reAQFMjKFrp621itGU","IsPausePanel");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.banInterAction=function(t){var e=this.node.getComponentsInChildren(cc.Button);e.length>0&&e.forEach(function(e){e.interactable=t})},e.prototype.setIsActive=function(t){this.node.active=t},a([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],LoadingMgr:[function(t,e,o){"use strict";cc._RF.push(e,"80345UpNKxDBb/ol3owSf1O","LoadingMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Data/ResConstValue"),i=t("../EventFrameWork/Singleton"),s=t("../Manager/ResMgr"),c=t("../UIFrameWork/Manager/UIAnimationMgr"),u=t("../Util/Util"),l=t("../WeChat/TCloudMgr"),p=t("../WeChat/WeChatMgr"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isload=!1,e.loadNumber=0,e}return r(e,t),e.prototype.init=function(){var t=this;Promise.all([p.default.Instance(p.default).getNetworkType()]).then(function(e){console.log("\u5f53\u524d\u7f51\u7edc\u72b6\u6001:",e[0]),"none"==e[0]?p.default.Instance(p.default).showModal("","\u7f51\u7edc\u5df2\u65ad\u5f00\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u72b6\u6001\u540e\u91cd\u8bd5"):(p.default.Instance(p.default).init(),u.default.Instance(u.default).screenFit(),t.setIsLoad(!1),l.default.Instance(l.default).initCloud().then(function(e){console.log("\u4e91\u5f00\u53d1\u521d\u59cb\u5316\u6210\u529f:",e),p.default.Instance(p.default).getUID(),l.default.Instance(l.default).onWatcherReceivedGifts(),t.loadSubPackages().then(function(){console.log("\u5206\u5305\u52a0\u8f7d\u5b8c\u6210"),s.default.Instance(s.default).loadAllRes().then(function(){t.setIsLoad(!0)})})}))})},e.prototype.loadSubPackage=function(t){return new Promise(function(e,o){cc.assetManager.loadBundle(t,function(t){t?console.log("\u5206\u5305\u52a0\u8f7d\u51fa\u9519\uff1a",t):e(o)})})},e.prototype.loadSubPackages=function(){for(var t=[],e=0;e<a.default.PACKAGES_NAME.length;e++)t.push(this.loadSubPackage(a.default.PACKAGES_NAME[e]));return console.log("\u5206\u5305\uff1a",t),Promise.all(t)},e.prototype.getIsload=function(){return this.isload},e.prototype.setIsLoad=function(t){this.isload=t},e.prototype.getLoadNumber=function(){return this.loadNumber},e.prototype.setLoadNumber=function(t){this.loadNumber=t},e.prototype.onLoading=function(t){p.default.Instance(p.default).getIsLogin()?(t.active=!0,this.getLoadNumber()<=.25?this.loadNumber+=.002:this.getLoadNumber()>.25&&this.getLoadNumber()<=.5?this.getIsload()?this.loadNumber+=.002:this.loadNumber+=.001:this.getLoadNumber()>.5&&this.getLoadNumber()<=.75?this.getIsload()?this.loadNumber+=.02:this.loadNumber+=.005:this.getLoadNumber()>.75&&this.getLoadNumber()<=1&&(this.getIsload()?this.loadNumber+=.02:this.loadNumber+=.005),c.default.Instance(c.default).uploadingUIAnimation(t,this.loadNumber),this.getIsload()&&this.getLoadNumber()>=1&&(u.default.Instance(u.default).loadScence("GameScence"),this.setIsLoad(!1))):t.active=!1},e}(i.default);o.default=f,cc._RF.pop()},{"../Data/ResConstValue":"ResConstValue","../EventFrameWork/Singleton":"Singleton","../Manager/ResMgr":"ResMgr","../UIFrameWork/Manager/UIAnimationMgr":"UIAnimationMgr","../Util/Util":"Util","../WeChat/TCloudMgr":"TCloudMgr","../WeChat/WeChatMgr":"WeChatMgr"}],MoveStateW:[function(t,e,o){"use strict";cc._RF.push(e,"6246azzuqZLpaNNC8L7LAGy","MoveStateW");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.move,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"aim",0)},e.prototype.Reason=function(t){s.default.Instance(s.default).attackEnemyWuKong&&(s.default.Instance(s.default).attackEnemyWuKong=!1,this.fsm.performTransition(a.Transition.attackEnemy)),s.default.Instance(s.default).hitEnemyWuKong&&(s.default.Instance(s.default).hitEnemyWuKong=!1,Math.random()>.5?this.fsm.performTransition(a.Transition.hitEnemy):this.fsm.performTransition(a.Transition.hitYun)),null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.fsm.performTransition(a.Transition.stopAction),this.storePos=null):this.storePos=t.parent.position},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],MoveState:[function(t,e,o){"use strict";cc._RF.push(e,"1ff8cKRhQ1FK4DyQrPVL5lF","MoveState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.move,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"aim",0)},e.prototype.Reason=function(t){s.default.Instance(s.default).attackEnemyTangseng&&(s.default.Instance(s.default).attackEnemyTangseng=!1,this.fsm.performTransition(a.Transition.attackEnemy)),s.default.Instance(s.default).hitEnemyTangseng&&(s.default.Instance(s.default).hitEnemyTangseng=!1,Math.random()>.5?this.fsm.performTransition(a.Transition.hitEnemy):this.fsm.performTransition(a.Transition.hitYun)),null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.fsm.performTransition(a.Transition.stopAction),this.storePos=null):this.storePos=t.parent.position},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],ResConstValue:[function(t,e,o){"use strict";cc._RF.push(e,"75f8fmXjR1AqIl95IoZ+P46","ResConstValue"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={PACKAGES_NAME:[],LocalResList:[],remoteResList:[],tCloudResList:[{resName:"swiper1",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/picture/swiper1.jpg"},{resName:"swiper2",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/picture/swiper2.jpg"},{resName:"swiper3",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/picture/swiper3.jpg"},{resName:"spineAtlas",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/spine/luxiaoqi.atlas"},{resName:"spineJSON",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/spine/luxiaoqi.json"},{resName:"spinePicture",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/spine/luxiaoqi.png"},{resName:"beimianAtlas",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/spine/beimian.atlas"},{resName:"beimianJSON",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/spine/beimian.json"},{resName:"beimianPicture",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/spine/beimian.png"},{resName:"clickMusic",tCloudResPath:"cloud://test-1g6fmcaqc00fb341.7465-test-1g6fmcaqc00fb341-1305067680/music/clickBubble.mp3"}]},cc._RF.pop()},{}],ResMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f3a4eRU1btHB5pQNEMC+8z1","ResMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Data/ResConstValue"),i=t("../EventFrameWork/Singleton"),s=t("../WeChat/TCloudMgr"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.resMap=new Map,e.tCloudTemFilePaths=[],e}return r(e,t),e.prototype.loadLocal=function(t,e){var o=this;return new Promise(function(n){cc.resources.load(e,function(e,r){e?console.log("\u672c\u5730\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"):(o.resMap.set(t,r),n(o.resMap))})})},e.prototype.loadLocals=function(){var t=[];if(a.default.LocalResList.length<=0)return new Promise(function(t){t("\u8d44\u6e90\u4e3a\u7a7a")});for(var e=0;e<a.default.LocalResList.length;e++)t.push(this.loadLocal(a.default.LocalResList[e].resName,a.default.LocalResList[e].resLocalPath));return Promise.all(t)},e.prototype.loadRemote=function(t,e){var o=this;return new Promise(function(n){cc.assetManager.loadRemote(e,function(e,r){e?console.log("\u8fdc\u7a0b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"):(o.resMap.set(t,r),n(o.resMap))})})},e.prototype.loadRemotes=function(){var t=[];if(a.default.remoteResList.length<=0)return new Promise(function(t){t("\u8d44\u6e90\u4e3a\u7a7a")});for(var e=0;e<a.default.remoteResList.length;e++)t.push(this.loadRemote(a.default.remoteResList[e].resName,a.default.remoteResList[e].remoteResPath));return Promise.all(t)},e.prototype.loadTCloudPath=function(t,e){var o=this;return new Promise(function(n){s.default.Instance(s.default).downLoadFile(e,function(e){o.tCloudTemFilePaths.push({resName:t,temFilePath:e}),n(o.tCloudTemFilePaths)})})},e.prototype.loadTCload=function(t,e){var o=this;return new Promise(function(n){cc.assetManager.loadRemote(e,function(e,r){e?console.log("\u817e\u8baf\u4e91\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25"):(console.log(r),o.resMap.set(t,r),console.log("\u8d44\u6e90\u6570\u7ec4:",o.resMap),n(o.resMap))})})},e.prototype.loadTClouds=function(){var t=this;if(a.default.tCloudResList.length<=0)return new Promise(function(t){t("\u8d44\u6e90\u4e3a\u7a7a")});for(var e=[],o=0;o<a.default.tCloudResList.length;o++)e.push(this.loadTCloudPath(a.default.tCloudResList[o].resName,a.default.tCloudResList[o].tCloudResPath));return Promise.all(e).then(function(e){for(var o=[],n=0;n<e[0].length;n++)o.push(t.loadTCload(e[0][n].resName,e[0][n].temFilePath));return Promise.all(o)})},e.prototype.getResByName=function(t){if(this.resMap.get(t))return this.resMap.get(t);console.log("\u8d44\u6e90\u4e0d\u5b58\u5728")},e.prototype.loadAllRes=function(){var t=this;return this.loadLocals().then(function(){return t.loadRemotes().then(function(){return t.loadTClouds().then(function(){})})})},e}(i.default);o.default=c,cc._RF.pop()},{"../Data/ResConstValue":"ResConstValue","../EventFrameWork/Singleton":"Singleton","../WeChat/TCloudMgr":"TCloudMgr"}],RockerMgr:[function(t,e,o){"use strict";cc._RF.push(e,"3df813RrjdNwoR6C9yEmWtr","RockerMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,c=i.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.touchNode=null,e.player=null,e.playerSpeed=100,e.joystick=null,e.max_r=100,e.dir=null,e.touchID=null,e}return r(e,t),e.prototype.start=function(){this.joystick.setPosition(new cc.Vec2(0,0)),this.dir=new cc.Vec2(0,0),this.touchNode.on(cc.Node.EventType.TOUCH_START,this.cbTouchStart,this),this.touchNode.on(cc.Node.EventType.TOUCH_MOVE,this.cbTouchMove,this),this.touchNode.on(cc.Node.EventType.TOUCH_END,this.cbTouchEnd,this),this.touchNode.on(cc.Node.EventType.TOUCH_CANCEL,this.cbTouchCancel,this)},e.prototype.onDestroy=function(){this.touchNode.off(cc.Node.EventType.TOUCH_START,this.cbTouchStart,this),this.touchNode.off(cc.Node.EventType.TOUCH_MOVE,this.cbTouchMove,this),this.touchNode.off(cc.Node.EventType.TOUCH_END,this.cbTouchEnd,this),this.touchNode.off(cc.Node.EventType.TOUCH_CANCEL,this.cbTouchCancel,this)},e.prototype.cbTouchCancel=function(t){t.getID()==this.touchID&&(this.touchID=null,this.joystick.setPosition(new cc.Vec2(0,0)),this.dir=new cc.Vec2(0,0))},e.prototype.cbTouchEnd=function(t){t.getID()==this.touchID&&(this.touchID=null,this.joystick.setPosition(new cc.Vec2(0,0)),this.dir=new cc.Vec2(0,0))},e.prototype.cbTouchMove=function(t){if(t.getID()==this.touchID){var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e),n=o.mag();this.dir.x=o.x/n,this.dir.x=o.y/n,n>this.max_r&&(o.x=this.max_r*o.x/n,o.y=this.max_r*o.y/n),this.joystick.setPosition(o)}},e.prototype.cbTouchStart=function(t){if(null==this.touchID){this.touchID=t.getID();var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(e),n=o.mag();this.dir.x=o.x/n,this.dir.y=o.y/n,n>this.max_r&&(o.x=this.max_r*o.x/n,o.y=this.max_r*o.y/n),this.joystick.setPosition(o)}},a([c(cc.Node)],e.prototype,"touchNode",void 0),a([c(cc.Node)],e.prototype,"player",void 0),a([c(cc.Float)],e.prototype,"playerSpeed",void 0),a([c(cc.Node)],e.prototype,"joystick",void 0),a([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],SelectStateW:[function(t,e,o){"use strict";cc._RF.push(e,"2f92cdRDJtESrfbRC6VMvSt","SelectStateW");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.stateID=a.StateID.select,o}return r(e,t),e.prototype.Act=function(t){t.parent.getChildByName("jiantou").active&&i.default.Instance(i.default).playAnimation(t,"select",1)},e.prototype.Reason=function(){s.default.Instance(s.default).touchWuKongEnd&&(s.default.Instance(s.default).touchWuKongEnd=!1,this.fsm.performTransition(a.Transition.playerMove))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],SelectState:[function(t,e,o){"use strict";cc._RF.push(e,"8359cxi19xLTo1p43sj9p0Y","SelectState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=t("../Global"),c=function(t){function e(e){var o=t.call(this,e)||this;return o.stateID=a.StateID.select,o}return r(e,t),e.prototype.Act=function(t){t.parent.getChildByName("jiantou").active&&i.default.Instance(i.default).playAnimation(t,"select",1)},e.prototype.Reason=function(){s.default.Instance(s.default).touchTangsengEnd&&(s.default.Instance(s.default).touchTangsengEnd=!1,this.fsm.performTransition(a.Transition.playerMove))},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=c,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr","../Global":"Global"}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"6ebc7x8/aRIYKfH0a2PeXpy","Singleton"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.Instance=function(t){return this.instance||(this.instance=new t),this.instance},t.instance=null,t}();o.default=n,cc._RF.pop()},{}],SpineMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8fa22d1KOFAarYPsXNvu92+","SpineMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../EventFrameWork/Singleton"),i=t("./ResMgr"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.initSkeletonData=function(t,e,o){var n=new sp.SkeletonData,r=i.default.Instance(i.default).getResByName(t);n.atlasText=r.text;var a=i.default.Instance(i.default).getResByName(e);n.skeletonJson=a.json;var s=i.default.Instance(i.default).getResByName(o);return n.textures=[s],n.textureNames=["luxiaoqi.png"],n},e.prototype.setMix=function(t,e,o){var n=this.getAnimation(t);t.getComponent(sp.Skeleton).setMix(n,e,o)},e.prototype.isSameAn=function(t,e){return t.getComponent(sp.Skeleton).animation=e},e.prototype.getAnimation=function(t){return t.getComponent(sp.Skeleton).animation},e.prototype.setAnCallBack=function(t,e){t.getComponent(sp.Skeleton).setCompleteListener(e)},e.prototype.removeAnCallBack=function(t){t.getComponent(sp.Skeleton).setCompleteListener(null)},e.prototype.pauseAnimation=function(t){t.getComponent(sp.Skeleton).timeScale=0},e.prototype.resumeAnimation=function(t){t.getComponent(sp.Skeleton).timeScale=1},e.prototype.isSameSkin=function(t,e){return t.getComponent(sp.Skeleton).defaultSkin=e},e.prototype.setSpineSkin=function(t,e){this.isSameSkin(t,e)||t.getComponent(sp.Skeleton).setSkin(e)},e.prototype.setAnimation=function(t,e,o,n,r){this.isSameAn(t,e)||(this.setMix(t,e,n),t.getComponent(sp.Skeleton).setAnimation(0,e,o),r&&this.setAnCallBack(t,r))},e.prototype.localChaneDress=function(t,e,o,n){var r=t.getComponent(sp.Skeleton),a=r.skeletonData.getRuntimeData(),i=r.findSlot(e),s=a.findSkin(o),c=a.findSlotIndex(e),u=s.getAttachment(c,n);i&&u?(i.setAttachment(u),r.invalidAnimationCache()):console.error(i&&u,"slots:"+e+",attachment:"+n+"\u4e0d\u5b58\u5728")},e.prototype.generateSomeNodes=function(t,e,o){t.getComponent(sp.Skeleton).attachUtil.generateAttachedNodes(e)[0].addChild(cc.instantiate(o))},e.prototype.destroySomeNodes=function(t,e){t.getComponent(sp.Skeleton).attachUtil.destroyAttachedNodes(e)},e}(a.default);o.default=s,cc._RF.pop()},{"../EventFrameWork/Singleton":"Singleton","./ResMgr":"ResMgr"}],Stack:[function(t,e,o){"use strict";cc._RF.push(e,"984725yuIJDvp9nlucPcs0o","Stack"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.array=new Array}return t.prototype.push=function(t){this.array.push(t)},t.prototype.pop=function(){return this.array.pop()},t.prototype.peek=function(){var t=this.array.length;return this.array[t-1]},t.prototype.isEmpty=function(){return this.array.length<=0},t.prototype.clear=function(){this.array=[]},t.prototype.size=function(){return this.array.length},t}();o.default=n,cc._RF.pop()},{}],StateConstValue:[function(t,e,o){"use strict";cc._RF.push(e,"f00baK7q/NG2bNY4LFly3Fa","StateConstValue"),Object.defineProperty(o,"__esModule",{value:!0}),o.playerState=void 0,function(t){t[t.walk=0]="walk",t[t.idle=1]="idle",t[t.run=2]="run",t[t.jump=3]="jump"}(o.playerState||(o.playerState={})),cc._RF.pop()},{}],StateMachineMgr:[function(t,e,o){"use strict";cc._RF.push(e,"963c26pyXhF/4rcPsQRURc9","StateMachineMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../Data/StateConstValue"),i=function(t){function e(){var e=t.call(this)||this;return e.stateArray=[],e.state=null,e.storageState(a.playerState.jump),e.state=a.playerState.idle,e}return r(e,t),e.prototype.storageState=function(t){for(var e=0;e<=t;e++)this.stateArray.push(e);console.log(this.stateArray)},e.prototype.onState=function(){switch(this.state){case a.playerState.idle:case a.playerState.jump:case a.playerState.run:case a.playerState.walk:}},e}(t("../EventFrameWork/Singleton").default);o.default=i,cc._RF.pop()},{"../Data/StateConstValue":"StateConstValue","../EventFrameWork/Singleton":"Singleton"}],StorageMgr:[function(t,e,o){"use strict";cc._RF.push(e,"75d09gyIW5Et7kgj+9GYQ86","StorageMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.getIsCloseMusic=function(){var t=cc.sys.localStorage.getItem("isCloseMusic");return null!=t&&""!=t||(t=!0),t},e.prototype.setIsCloseMusic=function(t){cc.sys.localStorage.setItem("isCloseMusic",t)},e.prototype.getReceivedGiftsInfo=function(){var t=cc.sys.localStorage.getItem("receivedGiftInfo");return null==t||""==t?new Array:JSON.parse(t)},e.prototype.updateReceivedGiftsInfo=function(t,e){var o=this.getReceivedGiftsInfo();if(0==o.length)o.push({openid:t,receivedTime:e});else{for(var n=0;n<o.length;n++)if(o[n].openid==t)return o[n].receivedTime=e,void cc.sys.localStorage.setItem("receivedGiftInfo",JSON.stringify(o));o.push({openid:t,receivedTime:e})}cc.sys.localStorage.setItem("receivedGiftInfo",JSON.stringify(o))},e.prototype.getDisabledGiftsInfo=function(){var t=cc.sys.localStorage.getItem("disabledGiftInfo");return null==t||""==t?new Array:JSON.parse(t)},e.prototype.updateDisabledGiftsInfo=function(t,e){var o=this.getDisabledGiftsInfo();o.push({openid:t,sendTime:e}),cc.sys.localStorage.setItem("disabledGiftInfo",JSON.stringify(o))},e}(t("../EventFrameWork/Singleton").default);o.default=a,cc._RF.pop()},{"../EventFrameWork/Singleton":"Singleton"}],TCloudMgr:[function(t,e,o){"use strict";cc._RF.push(e,"61346q5ZsZMg701s+LAfUSI","TCloudMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.downLoadFile=function(t,e){(cc.cloud&&cc.cloud.initialize()).getTempFileURL({fileList:[t]}).then(function(t){console.log("\u4e91\u5f00\u53d1\u6587\u4ef6\u4e0b\u8f7d\u94fe\u63a5:",t.fileList[0].download_url),e(t.fileList[0].tempFileURL)})},e.prototype.initCloud=function(){return(cc.cloud&&cc.cloud.initialize()).auth({persistence:"local"}).anonymousAuthProvider().signIn()},e.prototype.callTcbFunction=function(t,e){return(cc.cloud&&cc.cloud.initialize()).callFunction({name:t,data:e})},e.prototype.getUID=function(){return this.callTcbFunction("userInfo",{action:"getUID"})},e.prototype.upLoadRankInfo=function(t,e,o,n){var r={action:"upload",param:{uid:t,url:e,userName:o,data:n}};this.callTcbFunction("rankInfo",r).then(function(t){console.log("\u6570\u636e\u4e0a\u4f20\u6210\u529f:",t.result)})},e.prototype.inquireRankInfo=function(t,e){var o={action:"inquire",param:{startNumber:t,maxLimitNumber:e}};return this.callTcbFunction("rankInfo",o)},e.prototype.inquireMyselfRankInfo=function(t){var e={action:"inquireMyself",param:{uid:t}};return this.callTcbFunction("rankInfo",e)},e.prototype.inquireAllRankInfo=function(){return this.callTcbFunction("rankInfo",{action:"inquireAll",param:{}})},e.prototype.uploadReceivedGiftPlayerInfoInGroup=function(t){var e={action:"upload",param:{uid:t}};this.callTcbFunction("receivedGiftPlayerInfoInGroup",e).then(function(){console.log("\u4e0a\u4f20\u6210\u529f")})},e.prototype.inquireReceivedGiftPlayerInfoInGroup=function(t){var e=this,o={action:"inquire",param:{uid:t}};return new Promise(function(t){e.callTcbFunction("receivedGiftPlayerInfoInGroup",o).then(function(e){console.log(e.result),t(e.result)})})},e.prototype.deleteReceivedGiftPlayerInfoInGroup=function(){this.callTcbFunction("receivedGiftPlayerInfoInGroup",{action:"delete",param:{}}).then(function(t){console.log("\u6570\u636e\u5220\u9664\u6210\u529f:",t.result)})},e.prototype.uploadReceivedGiftInfoInGroup=function(t,e){var o={action:"upload",param:{uid:t,sendTime:e}};this.callTcbFunction("receivedGiftInfoInGroup",o).then(function(t){console.log("\u4e0a\u4f20\u6210\u529f:",t.result)})},e.prototype.inquireReceivedGiftInfoInGroup=function(t,e){var o=this,n={action:"inquire",param:{uid:t,sendTime:e}};return new Promise(function(t){o.callTcbFunction("receivedGiftInfoInGroup",n).then(function(e){t(e.result)})})},e.prototype.deleteReceivedGiftInfoInGroup=function(){this.callTcbFunction("receivedGiftInfoInGroup",{action:"delete",param:{}}).then(function(t){console.log("\u6570\u636e\u6e05\u9664\u6210\u529f:",t.result)})},e.prototype.uploadReceivedGifts=function(t,e){var o={action:"upload",param:{userName:t,type:e}};this.callTcbFunction("receivedGifts",o).then(function(t){console.log("\u4e0a\u4f20\u6210\u529f:",t.result)})},e.prototype.deleteReceivedGifts=function(){this.callTcbFunction("receivedGifts",{action:"delete",param:{}}).then(function(t){console.log("\u5220\u9664\u6570\u636e\u6210\u529f:",t.result)})},e.prototype.onWatcherReceivedGifts=function(){(cc.cloud&&cc.cloud.initialize()).database().collection("receivedGifts").watch({onChange:function(t){var e=[];if(0!=t.docChanges.length){for(var o=0;o<t.docChanges.length;o++)"add"==t.docChanges[o].dataType&&(console.log("\u6dfb\u52a0\u4e86"),e.push({userName:t.docChanges[o].doc.USERNAME,type:t.docChanges[o].doc.TYPE}));0!=e.length&&console.log("\u4e00\u6b21\u76d1\u542c\u7ed3\u675f:",e)}},onError:function(t){console.error("the watch closed because of error",t)}})},e}(t("../EventFrameWork/Singleton").default);o.default=a,cc._RF.pop()},{"../EventFrameWork/Singleton":"Singleton"}],TangsengMgr:[function(t,e,o){"use strict";cc._RF.push(e,"bf6527Uw5BMYYKEuI3nyw8U","TangsengMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../FrameWork/EventFrameWork/EventCenter"),s=t("../FrameWork/EventFrameWork/EventType"),c=t("./Global"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wukongNode=null,e.jiantouNode=null,e.eventID=null,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.jiantouNode=this.node.getChildByName("jiantou"),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},e.prototype.update=function(){},e.prototype.touchStart=function(t){if(null==this.eventID||this.eventID==t.getID()){i.default.Instance(i.default).boradcast(c.default.Instance(c.default).eventNode,s.EventType.select,this.node),this.eventID=t.getID();var e=t.getLocation();this.followDegree(e),c.default.Instance(c.default).touchTangseng=!0}},e.prototype.touchMove=function(t){if(null==this.eventID||this.eventID==t.getID()){var e=t.getLocation();this.followDegree(e),c.default.Instance(c.default).touchTangseng=!0}},e.prototype.touchEnd=function(t){null!=this.eventID&&this.eventID!=t.getID()||(this.eventID=null,this.node.getComponent(cc.RigidBody).applyLinearImpulse(this.jiantouNode.parent.convertToNodeSpaceAR(t.getLocation()),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.node.getChildByName("jiantou").active=!1,c.default.Instance(c.default).touchTangsengEnd=!0,c.default.Instance(c.default).touchTangseng=!1)},e.prototype.touchCancel=function(t){null!=this.eventID&&this.eventID!=t.getID()||(this.eventID=null,this.node.getComponent(cc.RigidBody).applyLinearImpulse(this.jiantouNode.parent.convertToNodeSpaceAR(t.getLocation()),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.node.getChildByName("jiantou").active=!1,c.default.Instance(c.default).touchTangsengEnd=!0,c.default.Instance(c.default).touchTangseng=!1)},e.prototype.followDegree=function(t){var e=this.jiantouNode.parent.convertToNodeSpaceAR(t),o=180*Math.atan2(e.x,e.y)/Math.PI;this.jiantouNode.angle=-o},e.prototype.onBeginContact=function(t,e,o){"enemy<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).attackEnemyTangseng=!0),"wukong<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).hitEnemyTangseng=!0)},e.prototype.onEndContact=function(t,e,o){"enemy<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).attackEnemyEndTangseng=!0),"wukong<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).hitEndEnemyTangseng=!0)},a([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../FrameWork/EventFrameWork/EventCenter":"EventCenter","../FrameWork/EventFrameWork/EventType":"EventType","./Global":"Global"}],Tangseng:[function(t,e,o){"use strict";cc._RF.push(e,"5274fADtt9EJqplV6qxncAR","Tangseng");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../FrameWork/FSMFrameWork/FSMState"),s=t("../FrameWork/FSMFrameWork/FSMSystem"),c=t("./FSMState/AttackState"),u=t("./FSMState/HitState"),l=t("./FSMState/IdleState"),p=t("./FSMState/MoveState"),f=t("./FSMState/SelectState"),d=t("./FSMState/YunState"),h=cc._decorator,y=h.ccclass,g=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.initFSM()},e.prototype.update=function(){this.fsm.onState(this.node)},e.prototype.initFSM=function(){this.fsm=new s.default;var t=new l.default(this.fsm);t.addTransition(i.Transition.selectPlayer,i.StateID.select);var e=new f.default(this.fsm);e.addTransition(i.Transition.playerMove,i.StateID.move);var o=new p.default(this.fsm);o.addTransition(i.Transition.hitEnemy,i.StateID.hit),o.addTransition(i.Transition.attackEnemy,i.StateID.attack),o.addTransition(i.Transition.hitYun,i.StateID.yun),o.addTransition(i.Transition.stopAction,i.StateID.idle);var n=new u.default(this.fsm);n.addTransition(i.Transition.hitEnd,i.StateID.move),n.addTransition(i.Transition.stopAction,i.StateID.idle);var r=new c.default(this.fsm);r.addTransition(i.Transition.attackEnd,i.StateID.move),r.addTransition(i.Transition.stopAction,i.StateID.idle);var a=new d.default(this.fsm);a.addTransition(i.Transition.stopAction,i.StateID.idle),this.fsm.addState(t),this.fsm.addState(e),this.fsm.addState(o),this.fsm.addState(n),this.fsm.addState(r),this.fsm.addState(a)},a([y],e)}(cc.Component));o.default=g,cc._RF.pop()},{"../FrameWork/FSMFrameWork/FSMState":"FSMState","../FrameWork/FSMFrameWork/FSMSystem":"FSMSystem","./FSMState/AttackState":"AttackState","./FSMState/HitState":"HitState","./FSMState/IdleState":"IdleState","./FSMState/MoveState":"MoveState","./FSMState/SelectState":"SelectState","./FSMState/YunState":"YunState"}],UIAnimationMgr:[function(t,e,o){"use strict";cc._RF.push(e,"14e94VeECpNspyX/QONyyrh","UIAnimationMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.scaleAnimation=function(t,e){e?(t.active=!0,t.scale=0,cc.tween(t).to(.2,{scale:1}).call(function(){t.scale=1}).start()):(t.scale=1,cc.tween(t).to(.2,{scale:0}).call(function(){t.scale=1,t.active=!1}).start())},e.prototype.opacityAnimation=function(t,e){e?(t.active=!0,t.opacity=0,cc.tween(t).to(.2,{opacity:225}).call(function(){t.opacity=255}).start()):(t.opacity=255,cc.tween(t).to(.2,{opacity:0}).call(function(){t.opacity=255,t.active=!1}).start())},e.prototype.posAnimation=function(t,e,o,n,r){if(r)t.active=!0,t.position=e,cc.tween(t).to(n,{position:o}).call(function(){}).start();else{var a=t.position;cc.tween(t).to(n,{position:e}).call(function(){t.position=a,t.active=!1}).start()}},e.prototype.uploadingUIAnimation=function(t,e){t.getComponent(cc.ProgressBar).progress=e},e}(t("../../EventFrameWork/Singleton").default);o.default=a,cc._RF.pop()},{"../../EventFrameWork/Singleton":"Singleton"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"72eefnuNHhL0IQWrUnq6As9","UIManager");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../EventFrameWork/Singleton"),i=t("../DataStructure/Stack"),s=t("../UIPanelType/UIPanelTypeInfo"),c=function(t){function e(){var e=t.call(this)||this;return e.parseUIPanelTypeJson(),e}return r(e,t),Object.defineProperty(e.prototype,"CanvasTransform",{get:function(){return null==this.canvasTransform&&(this.canvasTransform=cc.find("Canvas")),this.canvasTransform},enumerable:!1,configurable:!0}),e.prototype.parseUIPanelTypeJson=function(){var t=this;this.panelPathDic=new Map,s.default.forEach(function(e){t.panelPathDic.set(e.panelType,e.path)})},e.prototype.getPanel=function(t){var e=this;null==this.panelDic&&(this.panelDic=new Map);var o=this.panelDic.get(t);if(null==o){var n=this.panelPathDic.get(t);return new Promise(function(o,r){cc.resources.load(n,cc.Prefab,function(n,a){if(n)return r(n),void console.log("\u9884\u5236\u4f53\u52a0\u8f7d\u5931\u8d25");var i=cc.instantiate(a);i.setParent(e.CanvasTransform),i.active=!0,e.panelDic.set(t,i.getComponent("BasePanel")),o(i.getComponent("BasePanel"))})})}return new Promise(function(t){t(o)})},e.prototype.pushPanel=function(t){var e=this;null==this.panelStack&&(this.panelStack=new i.default),this.panelStack.size()>0&&this.panelStack.peek().OnPause();var o=this.getPanel(t);Promise.all([o]).then(function(t){console.log("11111");var o=t[0];e.panelStack.push(o),o.OnEnter()})},e.prototype.popPanel=function(){null==this.panelStack&&(this.panelStack=new i.default),this.panelStack.size()<=0||(this.panelStack.pop().OnExit(),this.panelStack.size()<=0||this.panelStack.peek().OnResume())},e}(a.default);o.default=c,cc._RF.pop()},{"../../EventFrameWork/Singleton":"Singleton","../DataStructure/Stack":"Stack","../UIPanelType/UIPanelTypeInfo":"UIPanelTypeInfo"}],UIPanelTypeInfo:[function(t,e,o){"use strict";cc._RF.push(e,"32fbcfHPVhFGY/+B8KmR9QG","UIPanelTypeInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./UIPanelType"),r=[{panelType:n.UIPanleType.MainMenue,path:"UIPrefabs/BG"},{panelType:n.UIPanleType.Task,path:"UIPrefabs/taskPanel"},{panelType:n.UIPanleType.System,path:"UIPrefabs/systemPanel"},{panelType:n.UIPanleType.Skill,path:"UIPrefabs/skillPanel"},{panelType:n.UIPanleType.Shop,path:"UIPrefabs/shopPanel"},{panelType:n.UIPanleType.Bag,path:"UIPrefabs/bagPanel"}];o.default=r,cc._RF.pop()},{"./UIPanelType":"UIPanelType"}],UIPanelType:[function(t,e,o){"use strict";cc._RF.push(e,"8cf1dHX9CBJv7Gb0yTmrlek","UIPanelType"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIPanleType=void 0,function(t){t.MainMenue="MainMenue",t.Task="Task",t.System="System",t.Skill="Skill",t.Shop="Shop",t.Bag="Bag"}(o.UIPanleType||(o.UIPanleType={})),cc._RF.pop()},{}],Util:[function(t,e,o){"use strict";cc._RF.push(e,"3b9448+ghBJ4YsDJ4r/UHBX","Util");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.loadScence=function(t){cc.director.loadScene(t)},e.prototype.getTime=function(){return(new Date).getTime()},e.prototype.hourToMilliSecond=function(t){return 36e5*t},e.prototype.screenFit=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=wx.getSystemInfoSync(),e=t.screenWidth/t.screenHeight,o=cc.director.getWinSize(),n=o.width/o.height;console.log("\u8fdb\u6765\u4e86"),n>=e?(console.log("\u9002\u914d\u9ad8"),cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_HEIGHT)):n<e&&(console.log("\u9002\u914d\u5bbd"),cc.view.setResolutionPolicy(cc.ResolutionPolicy.FIXED_WIDTH))}},e}(t("../EventFrameWork/Singleton").default);o.default=a,cc._RF.pop()},{"../EventFrameWork/Singleton":"Singleton"}],WeChatMgr:[function(t,e,o){"use strict";cc._RF.push(e,"c022byLbNxHALRaWRVXssPK","WeChatMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=["c6fl858g1bce8nmo62"],i=t("../EventFrameWork/Singleton"),s=t("../Manager/AudioMgr"),c=t("../Manager/StorageMgr"),u=t("../Util/Util"),l=t("./TCloudMgr"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.islogin=!1,e.userName=null,e.headUrl=null,e.bannerADArray=[],e.interstitialAd=null,e.rewardVideoAd=null,e.loadVideo=!1,e.gridAd=null,e.gridAdError=!1,e.isShareToFriendCircle=!1,e.isUpShare=!1,e.isDriveShare=!1,e.isGiveGiftShare=!1,e.currentGiveGift=null,e.isReceivedGift=!0,e.startShareTime=null,e.lostTime=u.default.Instance(u.default).hourToMilliSecond(24),e.UID=null,e.selfVideo=null,e}return r(e,t),e.prototype.init=function(){this.login(),this.openFriendShare(),this.onShow()},e.prototype.login=function(){var t=this;if(cc.sys.platform==cc.sys.WECHAT_GAME){var e=wx.getSystemInfoSync(),o=e.screenWidth,n=e.screenHeight,r=this;wx.getSetting({success:function(e){if(e.authSetting["scope.userInfo"])wx.getUserInfo({success:function(e){r.setIsLogin(!0),t.setUserName(e.userInfo.nickName),t.setUserHeadUrl(e.userInfo.avatarUrl)}});else{var a=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:o,height:n}});a.onTap(function(e){e.userInfo?(r.setIsLogin(!0),t.setUserName(e.userInfo.nickName),t.setUserHeadUrl(e.userInfo.avatarUrl),a.destroy()):r.showModal("\u63d0\u793a","\u9700\u8981\u83b7\u53d6\u60a8\u7684\u7528\u6237\u4fe1\u606f\u767b\u9646\u6e38\u620f")})}}})}else this.setIsLogin(!0)},e.prototype.getIsLogin=function(){return this.islogin},e.prototype.setIsLogin=function(t){this.islogin=t},e.prototype.getUserName=function(){return this.userName},e.prototype.setUserName=function(t){this.userName=t},e.prototype.getUserHeadUrl=function(){return this.headUrl},e.prototype.setUserHeadUrl=function(t){this.headUrl=t},e.prototype.createBannerAd=function(){var t=this;if(cc.sys.platform==cc.sys.WECHAT_GAME)if(wx.createBannerAd)for(var e=function(e){o.bannerADArray[e]=wx.createBannerAd({adUnitId:a[e],style:{left:wx.getSystemInfoSync().windowHeight-43*wx.getSystemInfoSync().windowHeight/150,top:(wx.getSystemInfoSync().windowHeight-300)/2,width:600},adIntervals:30}),o.bannerADArray[e].onResize(function(o){var n=wx.getSystemInfoSync(),r=n.windowWidth,a=n.windowHeight;t.bannerADArray[e].style.left=(a-o.height)/2,cc.sys.os===cc.sys.OS_IOS&&o.width/o.height>2.1?t.bannerADArray[e].style.top=.93*r-o.width:t.bannerADArray[e].style.top=r-o.width}),o.bannerADArray[e].onError(function(t){console.log(t),console.log("banner\u5e7f\u544a\u521b\u5efa\u5931\u8d25")})},o=this,n=0;n<a.length;n++)e(n);else this.showModal("\u63d0\u793a","\u5f53\u524d\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u52a0\u8f7d\u5e7f\u544a")},e.prototype.showBannerAd=function(t,e){var o=this;if(void 0===e&&(e=-1),cc.sys.platform==cc.sys.WECHAT_GAME)for(var n=function(n){null!=r.bannerADArray[n]&&(n==e&&t?(r.bannerADArray[n].show(),setTimeout(function(){o.bannerADArray[n].show()},500)):(r.bannerADArray[n].hide(),setTimeout(function(){o.bannerADArray[n].hide()},500)))},r=this,a=0;a<this.bannerADArray.length;a++)n(a)},e.prototype.createInterstitialAd=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.createInterstitialAd&&(this.interstitialAd=wx.createInterstitialAd({adUnitId:"1724972a0edd51bc6f"}))},e.prototype.showInterstitialAd=function(){cc.sys.platform==cc.sys.WECHAT_GAME&&this.interstitialAd&&this.interstitialAd.show().catch(function(t){console.error(t)})},e.prototype.createRewardVideoAd=function(t,e){var o=this;cc.sys.platform==cc.sys.WECHAT_GAME&&wx.createRewardVideoAd&&(this.rewardVideoAd=wx.createRewardVideoAd({adUnitId:"2338muvdfvp87ifnc8"}),this.loadVideo=!1,this.rewardVideoAd.onLoad(function(){console.log("\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),o.loadVideo=!0}),this.rewardVideoAd.onError(function(){console.log("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25"),o.loadVideo=!1}),this.rewardVideoAd.onClose(function(n){o.loadVideo=!1,n&&n.isEnd||void 0===n?(console.log("\u64ad\u653e\u5b8c\u6210\u4e4b\u540e\u518d\u5173\u95ed"),t()):(console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),e()),s.default.Instance(s.default).resumeBGM()}))},e.prototype.showRewardVideoAd=function(){var t=this;cc.sys.platform==cc.sys.WECHAT_GAME&&null!=this.rewardVideoAd&&(this.loadVideo&&this.showTips("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"),this.rewardVideoAd.show().then(function(){s.default.Instance(s.default).pauseBGM()}).catch(function(){t.rewardVideoAd.load().then(function(){s.default.Instance(s.default).pauseBGM()})}))},e.prototype.createGridAd=function(){var t=this;if(cc.sys.platform==cc.sys.WECHAT_GAME){var e=100,o=cc.view.getVisibleSize();cc.sys.os===cc.sys.OS_IOS&&o.height/o.width>2.1&&(e=120),this.gridAd=wx.createGridAd({adUnitId:"adunit-40f6fc418571620e",adTheme:"white",gridCount:5,style:{left:wx.getSystemInfoSync().windowWidth/2-165,top:wx.getSystemInfoSync().windowHeight-e,width:330,opacity:.8}}),this.gridAd.onLoad(function(){t.gridAdError=!1}),this.gridAd.onError(function(e){t.gridAdError=!0,t.gridAd.destroy(),console.log(e),console.log("createGridAd fail")})}},e.prototype.showGridAd=function(t){cc.sys.platform==cc.sys.WECHAT_GAME&&(wx.createGridAd?null!=this.gridAd&&(t?this.gridAdError?(this.gridAdError=!1,this.createGridAd(),this.showBannerAd(!0,0)):this.gridAd.show():this.gridAd.hide()):this.showBannerAd(!0,0))},e.prototype.openFriendShare=function(){var t=this;cc.sys.platform==cc.sys.WECHAT_GAME&&(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareTimeline(function(){return t.isShareToFriendCircle=!0,{title:"",imageUrl:"",imageUrlId:"",imagePreviewUrl:"",imagePreviewUrlId:"",query:"",path:""}}),wx.onShareAppMessage(function(){return t.isUpShare=!0,{title:"",imageUrl:"",query:"",imageUrlId:"",promise:"",toCurrentGroup:!1,path:""}}))},e.prototype.share=function(t,e){cc.sys.platform==cc.sys.WECHAT_GAME&&(this.isDriveShare=!0,wx.shareAppMessage({title:t,imageUrl:e,query:"",imageUrlId:""}))},e.prototype.giveGift=function(t,e,o){var n=this;cc.sys.platform==cc.sys.WECHAT_GAME&&wx.updateShareMenu({withShareTicket:!0,isPrivateMessage:!0,success:function(){n.isGiveGiftShare=!0,n.currentGiveGift=t,wx.shareAppMessage({title:e,imageUrl:o,query:"type="+t+"&uid="+n.UID+"&time="+u.default.Instance(u.default).getTime(),imageUrlId:""})}})},e.prototype.onShow=function(){var t=this;cc.sys.platform==cc.sys.WECHAT_GAME&&(wx.onHide(function(){t.isReceivedGift=!0,t.startShareTime=(new Date).getTime()}),wx.onShow(function(e){if(t.isDriveShare&&(t.isDriveShare=!1,(new Date).getTime()-t.startShareTime>u.default.Instance(u.default).hourToMilliSecond(5/60/60)?t.showTips("\u5206\u4eab\u6210\u529f"):t.showTips("\u5206\u4eab\u5931\u8d25")),t.isShareToFriendCircle&&(t.isShareToFriendCircle=!1,(new Date).getTime()-t.startShareTime>u.default.Instance(u.default).hourToMilliSecond(5/60/60)?t.showTips("\u5206\u4eab\u6210\u529f"):t.showTips("\u5206\u4eab\u5931\u8d25")),t.isUpShare&&(t.isUpShare=!1,(new Date).getTime()-t.startShareTime>u.default.Instance(u.default).hourToMilliSecond(5/60/60)?t.showTips("\u5206\u4eab\u6210\u529f"):t.showTips("\u5206\u4eab\u5931\u8d25")),t.isGiveGiftShare&&(t.isGiveGiftShare=!1,t.showTips("\u8d60\u9001\u6210\u529f"),t.currentGiveGift=null),t.isReceivedGift&&null!=e.query.uid){t.isReceivedGift=!1;var o=e.query.uid,n=(e.query.type,e.query.time),r=e.query.chatType;3==r||4==r?t.checkGiftInGroupChat(o,Number(n))&&(l.default.Instance(l.default).uploadReceivedGiftPlayerInfoInGroup(o),l.default.Instance(l.default).uploadReceivedGiftInfoInGroup(o,n)):t.checkGiftInPrivateChat(o,Number(n))&&(t.showModal("","\u793c\u7269\u9886\u53d6\u6210\u529f\uff01"),c.default.Instance(c.default).updateReceivedGiftsInfo(o,(new Date).getTime().toString()),c.default.Instance(c.default).updateDisabledGiftsInfo(o,n.toString()))}}))},e.prototype.onLaunchOptionsSync=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=wx.getLaunchOptionsSync();if(null!=t.query.uid){var e=t.query.uid,o=(t.query.type,t.query.time),n=t.query.chatType;3==n||4==n?this.checkGiftInGroupChat(e,Number(o))&&(l.default.Instance(l.default).uploadReceivedGiftPlayerInfoInGroup(e),l.default.Instance(l.default).uploadReceivedGiftInfoInGroup(e,o)):this.checkGiftInPrivateChat(e,Number(o))&&(this.showModal("","\u793c\u7269\u9886\u53d6\u6210\u529f\uff01"),c.default.Instance(c.default).updateReceivedGiftsInfo(e,(new Date).getTime().toString()),c.default.Instance(c.default).updateDisabledGiftsInfo(e,o.toString()))}}},e.prototype.checkGiftInPrivateChat=function(t,e){var o=this;if(t==this.UID)return this.showModal("","\u4e0d\u80fd\u9886\u53d6\u81ea\u5df1\u8d60\u9001\u7684\u793c\u7269"),!1;if((new Date).getTime()-e>=this.lostTime)return this.showModal("","\u62b1\u6b49\uff0c\u793c\u7269\u5df2\u5931\u6548\uff01"),!1;for(var n=c.default.Instance(c.default).getDisabledGiftsInfo(),r=0;r<n.length;r++)if(n[r].openid==t&&Number(n[r].sendTime)==e)return this.showModal("","\u60a8\u5df2\u9886\u53d6\u8fc7\u8be5\u793c\u7269\uff0c\u4e0d\u80fd\u91cd\u590d\u9886\u53d6\uff01"),!1;var a=l.default.Instance(l.default).inquireReceivedGiftPlayerInfoInGroup(t);Promise.all([a]).then(function(e){var n=e[0];console.log("gift:",n);var r=c.default.Instance(c.default).getReceivedGiftsInfo(),a=null,i=null;if(null==n&&0==r.length)return!0;for(var s=0;s<n.length;s++)n[s].UID==t&&(i=n[s]);for(s=0;s<r.length;s++)r[s].openid==t&&(a=r[s]);if(null!=i&&null!=a)if(i.RECEIVEDTIME>=a.receivedTime){if((new Date).getTime()-Number(i.RECEIVEDTIME)<u.default.Instance(u.default).hourToMilliSecond(2))return o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),!1}else if((new Date).getTime()-Number(a.receivedTime)<u.default.Instance(u.default).hourToMilliSecond(2))return o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),!1;return null!=i&&null==a&&(new Date).getTime()-Number(i.RECEIVEDTIME)<u.default.Instance(u.default).hourToMilliSecond(2)?(o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),!1):!(null==i&&null!=a&&(new Date).getTime()-Number(a.receivedTime)<u.default.Instance(u.default).hourToMilliSecond(2)&&(o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),1))})},e.prototype.checkGiftInGroupChat=function(t,e){var o=this;if(t==this.UID)return this.showModal("","\u4e0d\u80fd\u9886\u53d6\u81ea\u5df1\u8d60\u9001\u7684\u793c\u7269"),!1;if((new Date).getTime()-e>=this.lostTime)return this.showModal("","\u62b1\u6b49\uff0c\u793c\u7269\u5df2\u5931\u6548\uff01"),!1;var n=l.default.Instance(l.default).inquireReceivedGiftInfoInGroup(t,e);Promise.all([n]).then(function(e){if(null!=e[0])return!1;var n=l.default.Instance(l.default).inquireReceivedGiftPlayerInfoInGroup(t);Promise.all([n]).then(function(e){var n=e[0],r=c.default.Instance(c.default).getReceivedGiftsInfo(),a=null,i=null;if(null==n&&0==r.length)return!0;for(var s=0;s<n.length;s++)n[s].UID==t&&(i=n[s]);for(s=0;s<r.length;s++)r[s].openid==t&&(a=r[s]);if(null!=i&&null!=a)if(i.RECEIVEDTIME>=a.receivedTime){if((new Date).getTime()-Number(i.RECEIVEDTIME)<u.default.Instance(u.default).hourToMilliSecond(2))return o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),!1}else if((new Date).getTime()-Number(a.receivedTime)<u.default.Instance(u.default).hourToMilliSecond(2))return o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),!1;return null!=i&&null==a&&(new Date).getTime()-Number(i.RECEIVEDTIME)<u.default.Instance(u.default).hourToMilliSecond(2)?(o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),!1):!(null==i&&null!=a&&(new Date).getTime()-Number(a.receivedTime)<u.default.Instance(u.default).hourToMilliSecond(2)&&(o.showModal("","\u60a8\u5728\u4e24\u5c0f\u65f6\u5185\u5df2\u9886\u53d6\u8fc7\u8be5\u73a9\u5bb6\u8d60\u9001\u7684\u793c\u7269\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),1))})})},e.prototype.setData=function(t){console.log("UID:",this.UID),l.default.Instance(l.default).upLoadRankInfo(this.UID,this.getUserHeadUrl(),this.getUserName(),t)},e.prototype.getData=function(t,e){l.default.Instance(l.default).inquireRankInfo(t,e).then(function(t){return console.log(t.result),t.result})},e.prototype.getAllData=function(){l.default.Instance(l.default).inquireAllRankInfo().then(function(t){return console.log(t.result),t.result})},e.prototype.getMyselfData=function(){l.default.Instance(l.default).inquireMyselfRankInfo(this.UID).then(function(t){return console.log(t.result),t.result})},e.prototype.getUID=function(){var t=this;l.default.Instance(l.default).getUID().then(function(e){t.UID=e.result,console.log("\u6210\u529f:",t.UID)})},e.prototype.showModal=function(t,e,o){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showModal({title:t,content:e,showCancel:!1,confirmText:"\u786e\u5b9a",confirmColor:"#3CC51F",success:function(){o&&o()}})},e.prototype.showTips=function(t){cc.sys.platform==cc.sys.WECHAT_GAME&&wx.showToast({title:t,icon:"none",duration:2e3})},e.prototype.vibrateShort=function(){wx.vibrateLong({success:function(){console.log("\u9707\u52a8\u6210\u529f")},fail:function(){console.log("\u9707\u52a8\u5931\u8d25")}})},e.prototype.createSelfVideo=function(t,e){var o=this;s.default.Instance(s.default).getIsCloseMusic()||s.default.Instance(s.default).pauseAllMusic();var n=wx.getSystemInfoSync(),r=n.screenWidth,a=n.screenHeight;this.selfVideo=wx.createVideo({x:0,y:0,width:r,height:a,src:t,autoplay:!0,obeyMuteSwitch:!0,showCenterPlayBtn:!1,controls:!1,showProgress:!0,showProgressInControlMode:!0}),this.selfVideo.onEnded(function(){o.selfVideo.destroy(),o.selfVideo.offEnded(),o.showTips("\u89c6\u9891\u64ad\u653e\u6210\u529f"),e(),s.default.Instance(s.default).getIsCloseMusic()||s.default.Instance(s.default).resumeAllMusic()}),this.selfVideo.onError(function(){o.selfVideo.destroy(),o.selfVideo.offEnded(),o.showTips("\u89c6\u9891\u64ad\u653e\u5931\u8d25"),e(),s.default.Instance(s.default).getIsCloseMusic()||s.default.Instance(s.default).resumeAllMusic()})},e.prototype.screenShot=function(t,e){if(cc.sys.platform==cc.sys.WECHAT_GAME){var o=cc.game.canvas,n=wx.getSystemInfoSync(),r=n.screenWidth/o.width,a=n.screenWidth/r*(e.x/750),i=n.screenHeight/r*(e.y/1624);return cc.game.canvas.toTempFilePathSync({x:o.width/2*(t.x/375),y:o.height/2*(t.y/812),width:a,height:i,destWidth:a,destHeight:i})}},e.prototype.getNetworkType=function(){return cc.sys.platform==cc.sys.WECHAT_GAME?new Promise(function(t){wx.getNetworkType({success:function(e){t(e.networkType)}})}):null},e}(i.default);o.default=p,cc._RF.pop()},{"../EventFrameWork/Singleton":"Singleton","../Manager/AudioMgr":"AudioMgr","../Manager/StorageMgr":"StorageMgr","../Util/Util":"Util","./TCloudMgr":"TCloudMgr"}],WuKongMgr:[function(t,e,o){"use strict";cc._RF.push(e,"9f19ek6XFJGl5mKP3c3kKUb","WuKongMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../FrameWork/EventFrameWork/EventCenter"),s=t("../FrameWork/EventFrameWork/EventType"),c=t("./Global"),u=cc._decorator,l=u.ccclass,p=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wuKongNode=null,e.jiantouNode=null,e.eventID=null,e}return r(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0,this.jiantouNode=this.node.getChildByName("jiantou"),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},e.prototype.start=function(){},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},e.prototype.touchStart=function(t){if(null==this.eventID||this.eventID==t.getID()){i.default.Instance(i.default).boradcast(c.default.Instance(c.default).eventNode,s.EventType.select,this.node),this.eventID=t.getID();var e=t.getLocation();this.followDegree(e),c.default.Instance(c.default).touchWuKong=!0}},e.prototype.touchMove=function(t){if(null==this.eventID||this.eventID==t.getID()){var e=t.getLocation();this.followDegree(e),c.default.Instance(c.default).touchWuKong=!0}},e.prototype.touchEnd=function(t){null!=this.eventID&&this.eventID!=t.getID()||(this.eventID=null,this.node.getComponent(cc.RigidBody).applyLinearImpulse(this.jiantouNode.parent.convertToNodeSpaceAR(t.getLocation()),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.node.getChildByName("jiantou").active=!1,c.default.Instance(c.default).touchWuKongEnd=!0,c.default.Instance(c.default).touchWuKong=!1)},e.prototype.touchCancel=function(t){null!=this.eventID&&this.eventID!=t.getID()||(this.eventID=null,this.node.getComponent(cc.RigidBody).applyLinearImpulse(this.jiantouNode.parent.convertToNodeSpaceAR(t.getLocation()),this.node.getComponent(cc.RigidBody).getWorldCenter(),!0),this.node.getChildByName("jiantou").active=!1,c.default.Instance(c.default).touchWuKongEnd=!0,c.default.Instance(c.default).touchWuKong=!1)},e.prototype.followDegree=function(t){var e=this.jiantouNode.parent.convertToNodeSpaceAR(t),o=180*Math.atan2(e.x,e.y)/Math.PI;this.jiantouNode.angle=-o},e.prototype.onBeginContact=function(t,e,o){"enemy<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).attackEnemyWuKong=!0),"tangseng<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).hitEnemyWuKong=!0)},e.prototype.onEndContact=function(t,e,o){"enemy<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).attackEnemyEndWuKong=!0),"tangseng<PhysicsBoxCollider>"==o.name&&(c.default.Instance(c.default).hitEndEnemyWuKong=!0)},a([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../FrameWork/EventFrameWork/EventCenter":"EventCenter","../FrameWork/EventFrameWork/EventType":"EventType","./Global":"Global"}],WuKong:[function(t,e,o){"use strict";cc._RF.push(e,"8abe05jRghMQrSQNN0Kxh7/","WuKong");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../FrameWork/FSMFrameWork/FSMState"),s=t("../FrameWork/FSMFrameWork/FSMSystem"),c=t("./FSMStateW/AttackStateW"),u=t("./FSMStateW/HitStateW"),l=t("./FSMStateW/IdleStateW"),p=t("./FSMStateW/MoveStateW"),f=t("./FSMStateW/SelectStateW"),d=t("./FSMStateW/YunStateW"),h=cc._decorator,y=h.ccclass,g=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.initFSM()},e.prototype.update=function(){this.fsm.onState(this.node)},e.prototype.initFSM=function(){this.fsm=new s.default;var t=new l.default(this.fsm);t.addTransition(i.Transition.selectPlayer,i.StateID.select);var e=new f.default(this.fsm);e.addTransition(i.Transition.playerMove,i.StateID.move);var o=new p.default(this.fsm);o.addTransition(i.Transition.hitEnemy,i.StateID.hit),o.addTransition(i.Transition.attackEnemy,i.StateID.attack),o.addTransition(i.Transition.hitYun,i.StateID.yun),o.addTransition(i.Transition.stopAction,i.StateID.idle);var n=new u.default(this.fsm);n.addTransition(i.Transition.hitEnd,i.StateID.move),n.addTransition(i.Transition.stopAction,i.StateID.idle);var r=new c.default(this.fsm);r.addTransition(i.Transition.attackEnd,i.StateID.move),r.addTransition(i.Transition.stopAction,i.StateID.idle);var a=new d.default(this.fsm);a.addTransition(i.Transition.stopAction,i.StateID.idle),this.fsm.addState(t),this.fsm.addState(e),this.fsm.addState(o),this.fsm.addState(n),this.fsm.addState(r),this.fsm.addState(a)},a([y],e)}(cc.Component));o.default=g,cc._RF.pop()},{"../FrameWork/FSMFrameWork/FSMState":"FSMState","../FrameWork/FSMFrameWork/FSMSystem":"FSMSystem","./FSMStateW/AttackStateW":"AttackStateW","./FSMStateW/HitStateW":"HitStateW","./FSMStateW/IdleStateW":"IdleStateW","./FSMStateW/MoveStateW":"MoveStateW","./FSMStateW/SelectStateW":"SelectStateW","./FSMStateW/YunStateW":"YunStateW"}],YunStateW:[function(t,e,o){"use strict";cc._RF.push(e,"b2731K18URDSJvjsZ6n2REK","YunStateW");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.yun,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"yun",1)},e.prototype.Reason=function(t){var e=this;null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.storePos=null,setTimeout(function(){e.fsm.performTransition(a.Transition.stopAction)},2e3)):this.storePos=t.parent.position},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=s,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr"}],YunState:[function(t,e,o){"use strict";cc._RF.push(e,"066d7R1Q0dBJbTN20CzdbH2","YunState");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../FrameWork/FSMFrameWork/FSMState"),i=t("../DragonBonesMgr"),s=function(t){function e(e){var o=t.call(this,e)||this;return o.storePos=null,o.stateID=a.StateID.yun,o}return r(e,t),e.prototype.Act=function(t){i.default.Instance(i.default).playAnimation(t,"yun",1)},e.prototype.Reason=function(t){var e=this;null!=this.storePos&&Math.floor(this.storePos.x)==Math.floor(t.parent.position.x)&&Math.floor(this.storePos.y)==Math.floor(t.parent.position.y)?(this.storePos=null,setTimeout(function(){e.fsm.performTransition(a.Transition.stopAction)},2e3)):this.storePos=t.parent.position},e.prototype.DoBeforeEntering=function(){},e.prototype.DoAfterLeaving=function(){},e}(a.default);o.default=s,cc._RF.pop()},{"../../FrameWork/FSMFrameWork/FSMState":"FSMState","../DragonBonesMgr":"DragonBonesMgr"}]},{},["ResConstValue","StateConstValue","EventCenter","EventType","Singleton","FSMState","FSMSystem","RockerMgr","AudioMgr","CameraMgr","LoadingMgr","ResMgr","SpineMgr","StateMachineMgr","StorageMgr","BasePanel","Stack","UIAnimationMgr","UIManager","UIPanelType","UIPanelTypeInfo","IsPausePanel","Util","TCloudMgr","WeChatMgr","DragonBonesMgr","Enemy","EventMgr","AttackStateW","HitStateW","IdleStateW","MoveStateW","SelectStateW","YunStateW","AttackState","HitState","IdleState","MoveState","SelectState","YunState","GameMgr","Global","Tangseng","TangsengMgr","WuKong","WuKongMgr"]);